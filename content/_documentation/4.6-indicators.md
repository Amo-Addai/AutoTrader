---
title: Using Custom Indicators
permalink: docs/indicators
key: docs-indicators
---

*This page is currently in development. Check back again soon!*



 





`./lib/indicators.py`




All images shown here were created with [AutoPlot](autoplot), using the `view_indicators` function.


```python
from autotrader import autoplot
from autotrader.lib import indicators

ap      = autoplot.AutoPlot()
ap.data = data
ap.view_indicators(indicator_dict)
```

Note that the [indicators dictionary](strategies#indicators-dictionary) passed to the `view_indicators` method must
be formatted according to the correct [specification](autoplot#indicator-specification).



## Indicators

### Supertrend

Based on the SuperTrend indicator by user KivancOzbilgic on TradingView.

```python
def supertrend(data, period = 10, ATR_multiplier = 3.0)
```

```python
st_df          = indicators.supertrend(data, ATR_multiplier=2)

indicator_dict = {'Supertrend': {'type': 'Supertrend',
                                  'data': st_df}
                  }
```

Note that the supertrend dataframe also contains a trend column, indicating the current trend.

|   Column    | Description |
|:-----------:|-------------|
|uptrend| Uptrend price support level|
|downtrend| Downtrend price support level|
|trend| Current trend (1 for uptrend, -1 for downtrend)|

![SuperTrend Indicator](/AutoTrader/assets/indicators/supertrend.jpg "SuperTrend Indicator")




### Bearish Engulfing Pattern

```py
def bearish_engulfing(data, detection = None)
```


```py
engulfing_bearish = indicators.bearish_engulfing(data, detection = None)
indicator_dict = {'Bearish Engulfing Signal': {'type': 'Engulfing',
                                      'data': engulfing_bearish}
                  }
```

![Bearish Engulfing Pattern](/AutoTrader/assets/indicators/bearish-engulfing.jpg "Bearish Engulfing Pattern")




### Bullish Engulfing Pattern

```py
def bullish_engulfing(data, detection = None)
```


```py
engulfing_bullish = indicators.bullish_engulfing(data, detection = None)
indicator_dict = {'Bullish Engulfing Signal': {'type': 'Engulfing',
                                      'data': engulfing_bullish}
                  }
```

![Bullish Engulfing Pattern](/AutoTrader/assets/indicators/bullish-engulfing.jpg "Bullish Engulfing Pattern")



### Stochastic RSI




### Heikin-Ashi Candlesticks


```
def heikin_ashi(data)
```


```
ha_data        = indicators.heikin_ashi(data.copy())

indicator_dict = {'Heikin-Ashi Candles': {'type': 'Heikin-Ashi',
                                          'data': ha_data}
                  }
```

Note that a copy of the data must be passed into the `heikin-ashi` function by using the `.copy()` function, to prevent 
overwriting the original `data`. See [here](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.copy.html) 
for more information.

![Heikin-Ashi Candles](/AutoTrader/assets/indicators/HA.jpg "Heikin-Ashi Candles")





## Utility Indicators
The following is a collection of utility indicators which assist in building strategies.



### Price Swing Detection
Locates the recent swings in price and returns a rolling list of swing prices.

```py
def find_swings(data, use_body = False)
```

Returns a dataframe with three columns: Highs, Lows and Last. 
|   Column    | Description |
|:-----------:|-------------|
| Highs       | Most recent swing high |
| Lows        | Most recent swing low  |
| Last        | Most recent swing      |

```py
swings         = indicators.find_swings(data)
indicator_dict = {'Swing Detection': {'type': 'Swings',
                                      'data': swings}
                  }
```


![AutoTrader Swing Detection](/AutoTrader/assets/indicators/swings.jpg "AutoTrader Swing Detection")




### Merge signals
Returns a single signal list which has merged two signal lists. 

```python
def merge_signals(signal_1, signal_2)
```




### Rolling Signal

Returns a list which maintains the previous signal, until a new 
signal is given.

```
[0,1,0,0,0,-1,0,0,1,0,0]  ->  [0,1,1,1,1,-1,-1,-1,1,1,1]
```





### Crossover


```py
def crossover(list_1, list_2)
```


```py
macd, macd_signal, macd_hist = ta.MACD(data.Close.values)
macd_crossover = indicators.crossover(macd, macd_signal)

indicator_dict = {'MACD': {'type': 'MACD',
                           'macd': macd,
                           'signal': macd_signal,
                           'histogram': macd_hist},
                  'MACD Crossover': {'type': 'Crossover',
                                     'data': macd_crossover}
                  }
```

![Crossover Indicator](/AutoTrader/assets/indicators/crossover.jpg "Crossover Indicator")





### Cross Value
```py
def cross_values(a, b, ab_crossover)
```


```py
macd, macd_signal, macd_hist = ta.MACD(data.Close.values)
macd_crossover = indicators.crossover(macd, macd_signal)
macd_covals = indicators.cross_values(macd, macd_signal, macd_crossover)

indicator_dict = {'MACD': {'type': 'MACD',
                           'macd': macd,
                           'signal': macd_signal,
                           'histogram': macd_hist,
                           'crossvals': macd_covals},
                  'MACD Crossover': {'type': 'Crossover',
                                     'data': macd_crossover}
                  }
```

![Crossover Value Indicator](/AutoTrader/assets/indicators/crossvals.jpg "Crossover Value Indicator")






### Candles Between Crosses

```py
def candles_between_crosses(cross_list)
```







### Heikin-Ashi Candlestick Run
```python
def ha_candle_run(ha_data)
```
Returns a list for the number of consecutive green and red 
Heikin-Ashi candles.


